"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[386],{2386:function(e,a,s){s.r(a),s.d(a,{default:function(){return L}});var l=s(6768),n=s(4232),r=s(144),t=(s(4114),s(4864)),i=s(1219),o=s(3169),d=s.n(o),u=s(1387),p=s(8374);const g={slot:"label"},m={slot:"label"},c={slot:"label"},v={slot:"label"},k={slot:"label"},w={class:"SignInCard-new-alarm-span"};var b=(0,l.pM)({__name:"SignUpCard",setup(e){const{t:a}=p.A.global,s=(0,u.rd)(),o=(0,r.KR)(!1),b=(0,r.KR)(!1),_=(0,r.KR)("60"),f=(0,r.Kh)({username:"",password:"",passwordRepeat:"",mail:"",code:""}),y=(0,r.KR)(),F=(0,r.Kh)({username:[{required:!0,message:a("rules.username"),trigger:"blur"}],password:[{required:!0,message:a("rules.password"),trigger:"blur"}],passwordRepeat:[{required:!0,message:a("rules.passwordRepeat"),trigger:"blur"}],mail:[{required:!0,message:a("rules.mail"),trigger:"blur"},{type:"email",message:a("rules.mailConfirm"),trigger:"blur"}],code:[{required:!0,message:a("rules.code"),trigger:"blur"}]}),h=async()=>{const e=await(0,t.Uh)({mail:f.mail});200==e.data.code?((0,i.nk)({message:a("sign.sendSuccess"),type:"success"}),C(),o.value=!1):400==e.data.code?(0,i.nk)({message:a("sign.mailHasBeenUsed"),type:"warning"}):(0,i.nk)({message:a("static.paramsError"),type:"error"})},C=()=>{let e=60;b.value=!0,_.value=`${e}`;const a=setInterval((()=>{e--,_.value=`${e}`,e<=0&&(clearInterval(a),b.value=!1,_.value="60")}),1e3)},R=()=>{const e=/^([a-zA-Z0-9._%+-]+)@([a-zA-Z0-9.-]+\.[a-zA-Z]{2,})$/;e.test(f.mail)?(h(),o.value=!0):(0,i.nk)({message:a("rules.mailConfirm"),type:"warning"})},V=async()=>{let e=d().HmacSHA256(f.password,"SRIC"),l=d().enc.Hex.stringify(e);const n={username:f.username,password:l,mail:f.mail,code:f.code},r=await(0,t.Hh)(n);200==r.data.code?((0,i.nk)({message:a("sign.successSignUpMessage"),type:"success"}),s.push("SignIn")):400==r.data.code?(0,i.nk)({message:a("sign.usernameHasBeenUsedMessage"),type:"warning"}):401==r.data.code?(0,i.nk)({message:a("sign.wrongCodeMessage"),type:"warning"}):(0,i.nk)({message:a("static.paramsError"),type:"error"})},L=async e=>{e&&await e.validate(((e,s)=>{e?f.password==f.passwordRepeat?V():(0,i.nk)({message:a("sign.passwordCommon"),type:"warning"}):console.log("error submit!",s)}))},$=()=>{s.push("SignIn")};return(e,a)=>{const s=(0,l.g2)("el-input"),r=(0,l.g2)("el-form-item"),t=(0,l.g2)("el-button"),i=(0,l.g2)("el-form"),d=(0,l.g2)("el-divider"),u=(0,l.g2)("el-card");return(0,l.uX)(),(0,l.Wv)(u,null,{default:(0,l.k6)((()=>[(0,l.bF)(i,{ref_key:"signUpFormRef",ref:y,model:f,rules:F},{default:(0,l.k6)((()=>[(0,l.bF)(r,{prop:"username"},{default:(0,l.k6)((()=>[(0,l.Lk)("span",g,(0,n.v_)(e.$t("sign.username")),1),(0,l.bF)(s,{modelValue:f.username,"onUpdate:modelValue":a[0]||(a[0]=e=>f.username=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,l.bF)(r,{prop:"password"},{default:(0,l.k6)((()=>[(0,l.Lk)("span",m,(0,n.v_)(e.$t("sign.password")),1),(0,l.bF)(s,{modelValue:f.password,"onUpdate:modelValue":a[1]||(a[1]=e=>f.password=e),type:"password","show-password":"",clearable:""},null,8,["modelValue"])])),_:1}),(0,l.bF)(r,{prop:"passwordRepeat"},{default:(0,l.k6)((()=>[(0,l.Lk)("span",c,(0,n.v_)(e.$t("sign.repeatPassword")),1),(0,l.bF)(s,{modelValue:f.passwordRepeat,"onUpdate:modelValue":a[2]||(a[2]=e=>f.passwordRepeat=e),type:"password","show-password":"",clearable:""},null,8,["modelValue"])])),_:1}),(0,l.bF)(r,{prop:"mail"},{default:(0,l.k6)((()=>[(0,l.Lk)("span",v,(0,n.v_)(e.$t("user.mail")),1),(0,l.bF)(s,{modelValue:f.mail,"onUpdate:modelValue":a[3]||(a[3]=e=>f.mail=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,l.bF)(r,{prop:"code"},{default:(0,l.k6)((()=>[(0,l.Lk)("span",k,(0,n.v_)(e.$t("sign.code")),1),(0,l.bF)(s,{modelValue:f.code,"onUpdate:modelValue":a[4]||(a[4]=e=>f.code=e),clearable:""},{append:(0,l.k6)((()=>[b.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(t,{key:0,onClick:R,loading:o.value},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e.$t("sign.sendCode")),1)])),_:1},8,["loading"])),b.value?((0,l.uX)(),(0,l.Wv)(t,{key:1,disabled:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(_.value)+" S",1)])),_:1})):(0,l.Q3)("",!0)])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(t,{onClick:a[5]||(a[5]=e=>L(y.value)),type:"success",style:{width:"100%"}},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e.$t("common.signup")),1)])),_:1})])),_:1})])),_:1},8,["model","rules"]),(0,l.bF)(d),(0,l.Lk)("div",null,[(0,l.Lk)("span",w,(0,n.v_)(e.$t("static.alreadyHave")),1),(0,l.bF)(t,{onClick:$,class:"SignInCard-more-button",type:"primary",link:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e.$t("common.signin")),1)])),_:1})])])),_:1})}}});const _=b;var f=_;const y={key:0},F={key:1},h={class:"sign-in-hide-title-div"},C={class:"sign-in-hide-title-h1"};var R=(0,l.pM)({__name:"SignUp",setup(e){const a=(0,r.KR)("margin-top:"+(window.innerHeight/2-100)+"px;"),s=(0,r.KR)("margin-top:"+(window.innerHeight/2-350)+"px;"),t=(0,r.KR)(!1),i=()=>{a.value="margin-top:"+(window.innerHeight/2-100)+"px;",s.value="margin-top:"+(window.innerHeight/2-350)+"px;",window.innerWidth<800?t.value=!0:t.value=!1};return i(),window.addEventListener("resize",i),(e,r)=>{const i=(0,l.g2)("el-col"),o=(0,l.g2)("el-row");return(0,l.uX)(),(0,l.CE)(l.FK,null,[t.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",y,[(0,l.bF)(o,null,{default:(0,l.k6)((()=>[(0,l.bF)(i,{span:3}),(0,l.bF)(i,{span:8},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{style:(0,n.Tr)(s.value)},[(0,l.bF)(f)],4)])),_:1}),(0,l.bF)(i,{span:4}),(0,l.bF)(i,{span:7},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{style:(0,n.Tr)(a.value)},[(0,l.Lk)("h1",null,(0,n.v_)(e.$t("static.signupTitle")),1)],4)])),_:1}),(0,l.bF)(i,{span:2})])),_:1})])),t.value?((0,l.uX)(),(0,l.CE)("div",F,[(0,l.Lk)("div",h,[(0,l.Lk)("h1",C,(0,n.v_)(e.$t("static.signinTitle")),1)]),(0,l.Lk)("div",null,[(0,l.bF)(f,{class:"sign-in-hide-card"})])])):(0,l.Q3)("",!0)],64)}}});const V=R;var L=V}}]);
//# sourceMappingURL=386.5844f9ee.js.map